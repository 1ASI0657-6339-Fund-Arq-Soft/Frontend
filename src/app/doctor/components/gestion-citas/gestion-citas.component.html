<app-doctor-layout>
<div class="doctor-gestion">
  <h2 class="title">Gestión de Citas</h2>

  <div class="appointments-list" *ngIf="(appointments$ | async) as appointments">
    <div
      class="appointment-card"
      *ngFor="let a of appointments"
      [ngClass]="a.status"
    >
      <div class="card-info">
        <h3 class="appointment-title">Cita #{{ a.id }}</h3>

        <div class="appointment-time">
          <span>{{ a.date }}</span>
          <span class="separator">•</span>
          <span>{{ a.time?.hour || 0 }}:{{ a.time?.minute || '00' }}</span>
        </div>

        <div class="appointment-meta">
          <div>Paciente: {{ residentsMap[a.residentId || 0] || a.residentId }}</div>
          <div>Médico: {{ doctorsMap[a.doctorId || 0] || a.doctorId }}</div>
        </div>

        <div class="status" [ngClass]="a.status || 'pending'">
          {{ a.status || 'pendiente' }}
        </div>
      </div>

      <div class="card-actions">
        <button class="btn accept" (click)="accept(a.id)">Aceptar</button>
        <button class="btn reject" (click)="reject(a.id)">Rechazar</button>
        <button class="btn details" (click)="view(a)">Detalles</button>
      </div>
    </div>
  </div>
</div>
</app-doctor-layout>
